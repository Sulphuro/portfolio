<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Cipher Toolkit</title>
    <style>
        /* Previous styles remain, add these new styles */
        .button-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .action-button {
            background-color: var(--secondary-color);
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .action-button:hover {
            background-color: var(--hover-color);
        }

        .copy-paste-buttons {
            display: flex;
            gap: 5px;
            margin-top: 10px;
        }

        #modeToggle {
            width: 100px;
            background-color: #27ae60;
        }

        #modeToggle:hover {
            background-color: #219a52;
        }
    </style>
</head>
<body>
    <!-- Previous sidebar remains the same -->
    
    <div class="main-content">
        <!-- Previous cipher sections remain -->

        <div class="button-group">
            <button id="modeToggle" class="action-button" onclick="toggleMode()">Encode</button>
            <div class="copy-paste-buttons">
                <button class="action-button" onclick="copyResult()">Copy</button>
                <button class="action-button" onclick="pasteText()">Paste</button>
            </div>
        </div>

        <!-- Rest of the previous content remains -->
    </div>

    <script>
        // Updated cipher implementations
        const morseCode = {
            'A': '.-', 'B': '-...', 'C': '-.-.', 'D': '-..', 'E': '.', 'F': '..-.',
            'G': '--.', 'H': '....', 'I': '..', 'J': '.---', 'K': '-.-', 'L': '.-..',
            'M': '--', 'N': '-.', 'O': '---', 'P': '.--.', 'Q': '--.-', 'R': '.-.',
            'S': '...', 'T': '-', 'U': '..-', 'V': '...-', 'W': '.--', 'X': '-..-',
            'Y': '-.--', 'Z': '--..', ' ': '/', '1': '.----', '2': '..---', '3': '...--',
            '4': '....-', '5': '.....', '6': '-....', '7': '--...', '8': '---..',
            '9': '----.', '0': '-----'
        };

        const brailleMap = {
            'A': '⠁', 'B': '⠃', 'C': '⠉', 'D': '⠙', 'E': '⠑', 'F': '⠋',
            'G': '⠛', 'H': '⠓', 'I': '⠊', 'J': '⠚', 'K': '⠅', 'L': '⠇',
            'M': '⠍', 'N': '⠝', 'O': '⠕', 'P': '⠏', 'Q': '⠟', 'R': '⠗',
            'S': '⠎', 'T': '⠞', 'U': '⠥', 'V': '⠧', 'W': '⠺', 'X': '⠭',
            'Y': '⠽', 'Z': '⠵', ' ': ' '
        };

        // Reverse mappings
        const morseCodeReverse = Object.fromEntries(
            Object.entries(morseCode).map(([k, v]) => [v, k])
        );
        const brailleMapReverse = Object.fromEntries(
            Object.entries(brailleMap).map(([k, v]) => [v, k])
        );

        function toggleMode() {
            const toggle = document.getElementById('modeToggle');
            const currentMode = toggle.textContent;
            const newMode = currentMode === 'Encode' ? 'Decode' : 'Encode';
            
            // Swap input and result
            const input = document.getElementById('inputText');
            const result = document.getElementById('result');
            [input.value, result.textContent] = [result.textContent, input.value];
            
            toggle.textContent = newMode;
            processText();
        }

        function copyResult() {
            navigator.clipboard.writeText(document.getElementById('result').textContent);
        }

        function pasteText() {
            navigator.clipboard.readText().then(text => {
                document.getElementById('inputText').value = text;
                processText();
            });
        }

        // Updated cipher functions
        function textToMorse(text) {
            return text.toUpperCase().split('').map(c => morseCode[c] || c).join(' ');
        }

        function morseToText(morse) {
            return morse.split(' ').map(s => morseCodeReverse[s] || s).join('');
        }

        function textToBraille(text) {
            return text.toUpperCase().split('').map(c => brailleMap[c] || c).join('');
        }

        function brailleToText(braille) {
            return braille.split('').map(c => brailleMapReverse[c] || c).join('');
        }

        function textToHex(text) {
            return text.split('').map(c => 
                c.charCodeAt(0).toString(16).padStart(2, '0')
            ).join(' ');
        }

        function hexToText(hex) {
            return hex.split(' ').filter(x => x).map(h => 
                String.fromCharCode(parseInt(h, 16))
            ).join('');
        }

        // Updated processText function
        function processText() {
            const inputText = document.getElementById('inputText').value;
            const mode = document.getElementById('modeToggle').textContent.toLowerCase();
            let result;

            switch(currentCipher) {
                case 'hex':
                    result = mode === 'encode' ? textToHex(inputText) : hexToText(inputText);
                    break;
                case 'morse':
                    result = mode === 'encode' ? textToMorse(inputText) : morseToText(inputText);
                    break;
                case 'braille':
                    result = mode === 'encode' ? textToBraille(inputText) : brailleToText(inputText);
                    break;
                // Rest of the cases remain the same
            }

            document.getElementById('result').textContent = result;
        }

        // Update event listeners to remove the old mode selector
        document.getElementById('modeToggle').addEventListener('click', processText);
    </script>
</body>
</html>
